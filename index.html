<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>周一卦象</title>
  <script src="https://js.puter.com/v2/"></script>
  <style>
    body {
      background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
      font-family: "Noto Serif SC", serif;
      color: #222;
      text-align: center;
      padding: 50px;
    }
    button {
      font-size: 1.2em;
      padding: 0.6em 1.5em;
      background-color: #444;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #result {
      margin-top: 2em;
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>赛博·周一卦象检测</h1>
  <p>点击下方按钮，掷出两组三爻，生成本日卦象</p>
  <button onclick="startDivination()">掷卦</button>

  <div id="result"></div>

  <script>
    const guaMap = {
      "111111": "乾为天", "000000": "坤为地", "010001": "水雷屯", "100010": "山水蒙",
      "010111": "水天需", "111010": "天水讼", "000010": "地水师", "010000": "水地比",
      "110111": "风天小畜", "111011": "天泽履", "000111": "地天泰", "111000": "天地否",
      // 你可以继续补全完整的64卦映射...
    };

    function flipCoin() {
      return Math.random() < 0.5 ? 0 : 1; // 反为0，正为1
    }

    function getTrigramBinary() {
      let binary = "";
      for (let i = 0; i < 3; i++) {
        binary += flipCoin();
      }
      return binary;
    }

    function startDivination() {
      const resultBox = document.getElementById('result');
      const upper = getTrigramBinary(); // 上卦
      const lower = getTrigramBinary(); // 下卦
      const full = upper + lower; // 六位二进制卦象

      const guaName = guaMap[full] || "未知卦象";
      resultBox.innerHTML = `
        <p>你的上卦为：<strong>${upper}</strong></p>
        <p>你的下卦为：<strong>${lower}</strong></p>
        <p>生成卦象：<strong>${guaName}</strong>（编号：${full}）</p>
        <p>正在连接天机……</p>
      `;

      const prompt = `
请你根据以下信息，提供真实的《易经》六十四卦中的一个卦的传统解读：

- 上卦（二进制）：${upper}
- 下卦（二进制）：${lower}
- 六爻组合（上三爻 + 下三爻）：${full}
- 卦名（请只使用《易经》六十四卦中对应的中文卦名）：${guaName}

你需要输出的内容为：
1. 卦名（只保留标准卦名，如“泽水困”）
2. 卦义（根据传统易经解释，简洁但真实）
3. 解读（根据卦义，给予普通现代人一天的忠告，风格可以现代但不要虚构内容）

请不要胡编卦名或虚构解释，所有信息基于真实六十四卦。
`;

      puter.ai.chat(prompt).then((reply) => {
        resultBox.innerHTML += `<pre style="text-align: left; white-space: pre-wrap; margin-top: 20px;">${reply}</pre>`;
      });
    }
  </script>
</body>
</html>
